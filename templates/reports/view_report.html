{% extends 'reports/base.html' %}

{% load bootstrap3 %}

{% block title %}reports view{% endblock %}

{% block content %}

<h1>reports view</h1>

<section>

  <h2>Filters</h2>

  <form action="{% url 'reports:view_report' %}" method="get" class="form-horizontal">
    {% comment %}
    <!-- This gets in the way of saving queries by GET URI. -->
    <!-- csrf vulnerability: Cross-site DoS by spamming queries. -->
    <!-- Probably not a serious concern. -->
    {% csrf_token %}
    {% endcomment %}
    {% bootstrap_form form %}
    {% buttons submit='Regenerate' reset='Reset' %}
    {% endbuttons %}
  </form>
</section>

<section>

  <h2>Data</h2>

  <table class="table table-condensed">
    <thead>
      <tr>
        <th>Template</th>
        <th>Field</th>
        <th>Count</th>
        <th>Percentage</th>
      </tr>
    </thead>
    <tbody>
      {% for row in data %}
      <tr>
        {% for cell in row %}
        <td>{{ cell }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>

</section>

{% endblock %}
